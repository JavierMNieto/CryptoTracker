var clipboard=new ClipboardJS(".btn");function fullGraph(){document.getElementById("graph").requestFullscreen()}function toggleDarkMode(){"rgb(0, 0, 0)"==$("#graph").css("background-color")?($("#graph").css("background-color","white"),network.setOptions({nodes:{font:{color:"#000000"}}})):($("#graph").css("background-color","black"),network.setOptions({nodes:{font:{color:"#ffffff"}}}))}function drawGraph(e,o){return new Promise(t=>{var n=document.getElementById("graph");data={nodes:new vis.DataSet(o.nodes),edges:new vis.DataSet(o.edges)};let r=angular.element($("body")).scope();var a={nodes:{scaling:{min:25,max:200},shape:"dot",borderWidthSelected:1,font:{color:"#000000"},color:{highlight:{border:"#1f8766",background:"#e5ff00"}}},edges:{arrows:{to:{enabled:!0}},scaling:{min:1,max:25},arrowStrikethrough:!1,color:{highlight:"#e5ff00",hover:"#0062ff"},smooth:{type:"dynamic",forceDirection:"none"},font:{color:"#000000"}},groups:{useDefaultGroups:!0,usdt:{color:{background:"#26A17B",border:"#1f8766"}}},interaction:{dragNodes:!0,hideEdgesOnDrag:!1,hideNodesOnDrag:!1,hover:!0,tooltipDelay:100,hoverConnectedEdges:!0},layout:{improvedLayout:!1},physics:{stabilization:{enabled:!0,iterations:2e3,updateInterval:25},repulsion:{nodeDistance:400,springLength:300},forceAtlas2Based:{avoidOverlap:.75},enabled:!0,solver:totalTxs>2e3?"forceAtlas2Based":"repulsion"}};return network=new vis.Network(n,data,a),network.on("stabilizationProgress",function(e){var o=e.iterations/e.total,t=Math.max(20,496*o);document.getElementById("bar").style.width=t+"px",document.getElementById("text").innerHTML=Math.round(100*o)+"%"}),network.once("stabilizationIterationsDone",function(){$("#text").text("100%"),$("#bar").css("width","496px"),$("loadingBar").css("opacity",0),setTimeout(function(){$("#loadingBar").hide()},500)}),e&&stopPhysics(o),network.on("click",e=>{r.$apply(`vm.select(${JSON.stringify(e)})`)}),network.on("deselectEdge",e=>{var o=0;data.edges.forEach(e=>{o+=e.txsNum}),totalTxs=o,r.$apply("vm.selCollapsed = [];vm.setPage(1)")}),network.on("deselectNode",e=>{var o=0;data.edges.forEach(e=>{o+=e.txsNum}),totalTxs=o,r.$apply("vm.selection = undefined;")}),t(network)})}function stopPhysics(e){setTimeout(function(){network.setOptions({physics:{enabled:!1}}),network.fit({animation:!0}),document.getElementById("graphContainer").style="cursor: auto",$("#resetBtn").prop("disabled",!1),$("#filterBtn").prop("disabled",!1)},10*e.edges.length)}clipboard.on("success",function(e){e.action,e.clearSelection()}),clipboard.on("error",function(e){console.error("Action:",e.action),console.error("Trigger:",e.trigger)});